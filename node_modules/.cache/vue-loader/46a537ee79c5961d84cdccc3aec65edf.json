{"remainingRequest":"F:\\food_manage_vue\\foodmanage\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!F:\\food_manage_vue\\foodmanage\\src\\views\\Wallet.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\food_manage_vue\\foodmanage\\src\\views\\Wallet.vue","mtime":1674389506859},{"path":"F:\\food_manage_vue\\foodmanage\\node_modules\\babel-loader\\lib\\index.js","mtime":1673079884066},{"path":"F:\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\food_manage_vue\\foodmanage\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1673079884044}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcmVxdWVzdCBmcm9tICdAL3V0aWxzL3JlcXVlc3QnOw0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiV2FsbGV0IiwNCiAgZGF0YSgpew0KICAgIHJldHVybnsNCiAgICAgICAgdXNlcm5hbWU6JycsDQogICAgICAgIGJhbGFuY2U6MCwNCiAgICAgICAgZGlhbG9nVmlzaWJsZTpmYWxzZSwNCiAgICAgICAgdmFsdWU6MA0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpew0KICAgIHRoaXMuc2Vzc2lvbiA9IEpTT04ucGFyc2Uod2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSk7DQogICAgdGhpcy51c2VybmFtZSA9IHRoaXMuc2Vzc2lvbi51c2VybmFtZTsNCiAgICB0aGlzLmxvYWQoKTsNCiAgfSwNCiAgICBjb21wdXRlZDp7DQogICAgY291bnROdW0oKXsNCiAgICAgIHJldHVybiBOdW1iZXIodGhpcy5iYWxhbmNlKSArIE51bWJlcih0aGlzLnZhbHVlKTsNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6ew0KICAgICBoYW5kbGVDbG9zZShkb25lKSB7DQogICAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruiupOWFs+mXre+8nycpDQogICAgICAgICAgLnRoZW4oXyA9PiB7DQogICAgICAgICAgICBkb25lKCk7DQogICAgICAgICAgfSkNCiAgICAgICAgICAuY2F0Y2goXyA9PiB7fSk7DQogICAgICB9LA0KICAgIGxvYWQoKXsNCiAgICAgICAgICAgIHJlcXVlc3QuZ2V0KCIvdXNlci9zZWxlY3RCYWxhbmNlIix7DQogICAgICAgIHBhcmFtczp7DQogICAgICAgICAgICB1c2VybmFtZTp0aGlzLnVzZXJuYW1lDQogICAgICAgIH0NCiAgICB9KS50aGVuKChyZXMpPT57DQogICAgICAgIHRoaXMuYmFsYW5jZSA9IHJlcy5kYXRhWzBdLmJhbGFuY2U7DQogICAgICAgIA0KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOw0KDQogICAgfSkNCiAgICB9LA0KICAgICAgICByZWNoYXJnZSgpew0KICAgICAgcmVxdWVzdC5nZXQoIi91c2VyL3JlY2hhcmdlIix7DQogICAgICAgIHBhcmFtczp7DQogICAgICAgICAgYmFsYW5jZTp0aGlzLmNvdW50TnVtLA0KICAgICAgICAgIHVzZXJuYW1lOnRoaXMudXNlcm5hbWUNCiAgICAgICAgfQ0KICAgICAgfSkudGhlbigocmVzKT0+ew0KICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAiMCIpIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLlhYXlgLzmiJDlip8iLA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIA0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgICAgdGhpcy5sb2FkKCk7DQogICAgICB9KQ0KICAgIH0sDQogIH0NCn07DQo="},{"version":3,"sources":["Wallet.vue"],"names":[],"mappings":";AAgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Wallet.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <h1 style=\"text-align: center; margin-top: 30px\">我的钱包</h1>\r\n      <el-card style=\"width: 40%; margin: 50px 30%\">\r\n        <h2>我的余额：{{this.balance}}</h2>\r\n        <el-button icon=\"el-icon-coin\" style=\"margin-left:20px;margin-top:20px\" @click=\"dialogVisible = true\">充值</el-button>\r\n                  <el-dialog\r\n            title=\"充值\"\r\n            :visible.sync=\"dialogVisible\"\r\n            width=\"30%\"\r\n            :before-close=\"handleClose\"\r\n          >\r\n            <el-form  label-width=\"120px\">\r\n              <el-form-item label=\"充值额数\" >\r\n                 <el-input v-model=\"value\" style=\"width: 50%\"></el-input>\r\n              </el-form-item>\r\n            </el-form>\r\n            <span slot=\"footer\" class=\"dialog-footer\">\r\n              <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n              <el-button type=\"primary\" @click=\"recharge()\"\r\n                >确 定</el-button\r\n              >\r\n            </span>\r\n          </el-dialog>\r\n      </el-card>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from '@/utils/request';\r\nexport default {\r\n  name: \"Wallet\",\r\n  data(){\r\n    return{\r\n        username:'',\r\n        balance:0,\r\n        dialogVisible:false,\r\n        value:0\r\n    }\r\n  },\r\n  created(){\r\n    this.session = JSON.parse(window.sessionStorage.getItem(\"user\"));\r\n    this.username = this.session.username;\r\n    this.load();\r\n  },\r\n    computed:{\r\n    countNum(){\r\n      return Number(this.balance) + Number(this.value);\r\n    }\r\n  },\r\n  methods:{\r\n     handleClose(done) {\r\n        this.$confirm('确认关闭？')\r\n          .then(_ => {\r\n            done();\r\n          })\r\n          .catch(_ => {});\r\n      },\r\n    load(){\r\n            request.get(\"/user/selectBalance\",{\r\n        params:{\r\n            username:this.username\r\n        }\r\n    }).then((res)=>{\r\n        this.balance = res.data[0].balance;\r\n        \r\n        // console.log(res);\r\n\r\n    })\r\n    },\r\n        recharge(){\r\n      request.get(\"/user/recharge\",{\r\n        params:{\r\n          balance:this.countNum,\r\n          username:this.username\r\n        }\r\n      }).then((res)=>{\r\n        this.dialogVisible = false;\r\n        if (res.code === \"0\") {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"充值成功\",\r\n          });\r\n          \r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.msg,\r\n          });\r\n        }\r\n        this.load();\r\n      })\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}