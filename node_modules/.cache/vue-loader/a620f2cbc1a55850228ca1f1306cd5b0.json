{"remainingRequest":"F:\\food_manage_vue\\foodmanage\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!F:\\food_manage_vue\\foodmanage\\src\\views\\Favorites.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\food_manage_vue\\foodmanage\\src\\views\\Favorites.vue","mtime":1675670070681},{"path":"F:\\food_manage_vue\\foodmanage\\node_modules\\babel-loader\\lib\\index.js","mtime":1673079884066},{"path":"F:\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\food_manage_vue\\foodmanage\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1673079884044}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QuanMiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJGYXZvcml0ZXMiLA0KICBkYXRhKCl7DQogICAgcmV0dXJuew0KICAgICAgICBmYXZvcml0ZXNMaXN0OltdLA0KICAgICAgICBzZXNzaW9uOicnLA0KICAgICAgICB1c2VybmFtZTonJw0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpew0KICAgIHRoaXMuc2Vzc2lvbiA9IEpTT04ucGFyc2Uod2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oInVzZXIiKSk7DQogICAgdGhpcy51c2VybmFtZSA9IHRoaXMuc2Vzc2lvbi51c2VybmFtZTsNCiAgICB0aGlzLmxvYWQoKTsNCiAgfSwNCiAgbWV0aG9kczp7DQogICAgY2FuY2VsRmF2b3JpdGVzKGZpZCl7DQogICAgICBjb25zb2xlLmxvZyhmaWQpOw0KICAgICAgcmVxdWVzdC5nZXQoIi9mYXZvcml0ZXMvY2FuY2VsRmF2b3JpdGVzIix7DQogICAgICAgIHBhcmFtczp7DQogICAgICAgICAgZmlkOmZpZA0KICAgICAgICB9DQogICAgICB9KS50aGVuKHJlcz0+ew0KICAgICAgICAgaWYgKHJlcy5jb2RlID09ICIwIikgew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwNCiAgICAgICAgICAgICAgbWVzc2FnZTogIuWPlua2iOaUtuiXj+aIkOWKnyIsDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csDQogICAgICAgICAgICB9KTsNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5sb2FkKCkgLy/ph43mlrDliqDovb0NCiAgICAgIH0pDQogIH0gDQogICAgLGxvYWQoKXsNCiAgICAgICAgcmVxdWVzdC5nZXQoIi9mYXZvcml0ZXMvc2hvd0Zhdm9yaXRlcyIsew0KICAgICAgICAgICAgcGFyYW1zOnsNCiAgICAgICAgICAgICAgICB1c2VybmFtZTp0aGlzLnVzZXJuYW1lDQogICAgICAgICAgICB9DQogICAgICAgIH0pLnRoZW4oKHJlcyk9PnsNCiAgICAgICAgICAgIHRoaXMuZmF2b3JpdGVzTGlzdCA9IHJlcy5kYXRhOw0KICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgICAgfSkNCiAgICB9LA0KICAgICB0b0RldGFpbChpZCl7DQogICAgICByZXF1ZXN0LmdldCgiL2Zvb2QvZ2V0Rm9vZEluZm9CeUlkIix7DQogICAgICAgIHBhcmFtczp7DQogICAgICAgICAgaWQ6aWQNCiAgICAgICAgfQ0KICAgICAgfSkudGhlbigocmVzKSA9PnsNCiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzLmRhdGEuZm9vZE5hbWUpOw0KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7DQogICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oImZvb2QiLCBKU09OLnN0cmluZ2lmeShyZXMuZGF0YSkpOw0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2RldGFpbCcpDQogICAgICAgIC8vIHRoaXMub25lRm9vZCA9IA0KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YS5pZCk7DQogICAgICB9KQ0KICB9fQ0KfTsNCg=="},{"version":3,"sources":["Favorites.vue"],"names":[],"mappings":";AA6BA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Favorites.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n        <h2\r\n          style=\"\r\n            margin: 15px 20px;\r\n            color: #409eff;\r\n            border-bottom: 5px solid gray;\r\n            padding-bottom: 8px;\r\n          \"\r\n        >\r\n          收藏夹\r\n        </h2>\r\n      </div>\r\n      <div style=\"display:flex;justify-content:space-between;flex-wrap: wrap;\">\r\n        <div v-for=\"(item,index) in favoritesList\" :key=\"index\" style=\"background:whitesmoke;width:400px;height:320px;margin-bottom:20px\">\r\n            <div ><el-image\r\n              :src=\"item.foodPic\"\r\n              style=\"height: 200px; width: 300px;margin-left:50px;margin-top:30px;border-radius:10px\"\r\n          @click=\"toDetail(item.id)\"\r\n            ></el-image></div>\r\n            <div><h2 style=\"color:#409eff;text-align:center\">{{item.foodName}}</h2><el-button type=\"primary\" style=\"margin-left:150px;margin-top:5px\" @click=\"cancelFavorites(item.fid)\">取消收藏</el-button></div>\r\n\r\n        </div>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request.js\";\r\n\r\nexport default {\r\n  name: \"Favorites\",\r\n  data(){\r\n    return{\r\n        favoritesList:[],\r\n        session:'',\r\n        username:''\r\n    }\r\n  },\r\n  created(){\r\n    this.session = JSON.parse(window.sessionStorage.getItem(\"user\"));\r\n    this.username = this.session.username;\r\n    this.load();\r\n  },\r\n  methods:{\r\n    cancelFavorites(fid){\r\n      console.log(fid);\r\n      request.get(\"/favorites/cancelFavorites\",{\r\n        params:{\r\n          fid:fid\r\n        }\r\n      }).then(res=>{\r\n         if (res.code == \"0\") {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"取消收藏成功\",\r\n            });\r\n          } else {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: res.msg,\r\n            });\r\n          }\r\n          this.load() //重新加载\r\n      })\r\n  } \r\n    ,load(){\r\n        request.get(\"/favorites/showFavorites\",{\r\n            params:{\r\n                username:this.username\r\n            }\r\n        }).then((res)=>{\r\n            this.favoritesList = res.data;\r\n            console.log(res);\r\n        })\r\n    },\r\n     toDetail(id){\r\n      request.get(\"/food/getFoodInfoById\",{\r\n        params:{\r\n          id:id\r\n        }\r\n      }).then((res) =>{\r\n        // console.log(res.data.foodName);\r\n        // console.log(res.data);\r\n        sessionStorage.setItem(\"food\", JSON.stringify(res.data));\r\n        this.$router.push('/detail')\r\n        // this.oneFood = \r\n        // console.log(res.data.id);\r\n      })\r\n  }}\r\n};\r\n</script>\r\n\r\n<style>\r\n</style>\r\n"]}]}