{"remainingRequest":"F:\\food_manage_vue\\foodmanage\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js??vue-loader-options!F:\\food_manage_vue\\foodmanage\\src\\views\\Comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\food_manage_vue\\foodmanage\\src\\views\\Comment.vue","mtime":1674395370340},{"path":"F:\\food_manage_vue\\foodmanage\\node_modules\\babel-loader\\lib\\index.js","mtime":1673079884066},{"path":"F:\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\food_manage_vue\\foodmanage\\node_modules\\@vue\\vue-loader-v15\\lib\\index.js","mtime":1673079884044}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QuanMiOw0KaW1wb3J0IHsgRWRpdG9yLCBUb29sYmFyIH0gZnJvbSAiQHdhbmdlZGl0b3IvZWRpdG9yLWZvci12dWUiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7IEVkaXRvciwgVG9vbGJhciB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBlZGl0b3I6IG51bGwsDQogICAgICBjb21tZW50Q29udGVudDogIiIsDQogICAgICB0b29sYmFyQ29uZmlnOiB7fSwNCiAgICAgIGVkaXRvckNvbmZpZzogeyBwbGFjZWhvbGRlcjogIuivt+i+k+WFpeWGheWuuS4uLiIgfSwNCiAgICAgIG1vZGU6ICJkZWZhdWx0IiwgLy8gb3IgJ3NpbXBsZScsDQogICAgICB1cmw6ICJAL2Fzc2V0cy9oZWFkIiwNCiAgICAgIHNlc3Npb246ICIiLA0KICAgICAgbmlja05hbWU6ICIiLA0KICAgICAgdWlkOiAiIiwNCiAgICAgIGNvbW1lbnRMaXN0OltdDQogICAgfTsNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmxvYWQoKTsNCiAgICB0aGlzLnNlc3Npb24gPSBKU09OLnBhcnNlKHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ1c2VyIikpOw0KICAgIHRoaXMubmlja05hbWUgPSB0aGlzLnNlc3Npb24ubmlja05hbWU7DQogICAgLy8gY29uc29sZS5sb2codGhpcy5zZXNzaW9uLnVzZXJuYW1lKTsNCiAgICB0aGlzLnVpZCA9IHRoaXMuc2Vzc2lvbi51c2VybmFtZTsNCiANCiAgICAvLyB0aGlzLm5pY2tOYW1lID0gdGhpcy5zZXNzaW9uLmRhdGENCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGxvYWQoKXsNCiAgICAgICAgcmVxdWVzdC5nZXQoIi9jb21tZW50L3NlbGVjdEFsbENvbW1lbnQiKS50aGVuKChyZXMpPT57DQogICAgICAgICAgICB0aGlzLmNvbW1lbnRMaXN0ID0gcmVzLmRhdGE7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMuZGF0YSk7DQogICAgICAgIH0pDQogICAgfSwNCiAgICBvbkNyZWF0ZWQoZWRpdG9yKSB7DQogICAgICB0aGlzLmVkaXRvciA9IE9iamVjdC5zZWFsKGVkaXRvcik7IC8vIOS4gOWumuimgeeUqCBPYmplY3Quc2VhbCgpIO+8jOWQpuWImeS8muaKpemUmQ0KICAgIH0sDQogICAgaW5zZXJ0Q29tbWVudCgpIHsNCiAgICAgIHJlcXVlc3QNCiAgICAgICAgLmdldCgiL2NvbW1lbnQvaW5zZXJ0Q29tbWVudCIsIHsNCiAgICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICAgIGNvbW1lbnRDb250ZW50OiB0aGlzLmNvbW1lbnRDb250ZW50LA0KICAgICAgICAgICAgbmlja05hbWU6IHRoaXMubmlja05hbWUsDQogICAgICAgICAgICB1aWQ6IHRoaXMudWlkLA0KICAgICAgICAgIH0sDQogICAgICAgIH0pDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gIjAiKSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgICBtZXNzYWdlOiAi5Y+R6KGo6K+E6K665oiQ5YqfIiwNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgICAgICAgbWVzc2FnZTogcmVzLm1zZywNCiAgICAgICAgICAgIH0pOw0KICAgICAgICAgIH0NCiAgICAgICAgICB0aGlzLmNvbW1lbnRDb250ZW50ID0gIiI7DQogICAgICAgIH0pOw0KICAgIH0sDQogIH0sDQogIG1vdW50ZWQoKSB7DQogICAgLy8g5qih5oufIGFqYXgg6K+35rGC77yM5byC5q2l5riy5p+T57yW6L6R5ZmoDQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICB0aGlzLmh0bWwgPSAiPHA+5qih5oufIEFqYXgg5byC5q2l6K6+572u5YaF5a65IEhUTUw8L3A+IjsNCiAgICB9LCAxNTAwKTsNCiAgfSwNCiAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICBjb25zdCBlZGl0b3IgPSB0aGlzLmVkaXRvcjsNCiAgICBpZiAoZWRpdG9yID09IG51bGwpIHJldHVybjsNCiAgICBlZGl0b3IuZGVzdHJveSgpOyAvLyDnu4Tku7bplIDmr4Hml7bvvIzlj4rml7bplIDmr4HnvJbovpHlmagNCiAgfSwNCn07DQo="},{"version":3,"sources":["Comment.vue"],"names":[],"mappings":";AAiFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Comment.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <h2\r\n        style=\"\r\n          margin: 15px 20px;\r\n          color: #409eff;\r\n          border-bottom: 5px solid gray;\r\n          padding-bottom: 8px;\r\n        \"\r\n      >\r\n        讨论区\r\n      </h2>\r\n      <div>\r\n        <div style=\"border: 1px solid #ccc; width: 1000px; margin-left: 20%\">\r\n          <Toolbar\r\n            style=\"border-bottom: 1px solid #ccc\"\r\n            :editor=\"editor\"\r\n            :defaultConfig=\"toolbarConfig\"\r\n            :mode=\"mode\"\r\n          />\r\n          <Editor\r\n            style=\"height: 300px; overflow-y: hidden\"\r\n            v-model=\"commentContent\"\r\n            :defaultConfig=\"editorConfig\"\r\n            :mode=\"mode\"\r\n            @onCreated=\"onCreated\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <el-button\r\n            type=\"primary\"\r\n            style=\"margin: 5px 0 0 70%\"\r\n            @click=\"insertComment\"\r\n            >发送评论</el-button\r\n          >\r\n        </div>\r\n        <div\r\n          style=\"\r\n            border-top: 2px solid #409eff;\r\n            margin-top: 10px;\r\n            padding-top: 30px;\r\n          \"\r\n        >\r\n          <div style=\"width: 1000px; margin-left: 20%; border: 1px solid #ccc\" v-for=\"(item,index) in commentList\" :key=\"index\">\r\n            <div\r\n              style=\"\r\n                float: left;\r\n                width: 20%;\r\n                height: 200px;\r\n                border-right: 1px solid #ccc;\r\n              \"\r\n            >\r\n              <div\r\n                style=\"\r\n                  width: 150px;\r\n                  height: 150px;\r\n                  margin-left: 13%;\r\n                  margin-top: 10px;\r\n                  margin-right: 10px;\r\n                \"\r\n              >\r\n                <img\r\n                  src=\"@/assets/head.jpg\"\r\n                  style=\"width: 150; height: 150px; border-radius: 10px\"\r\n                />\r\n              </div>\r\n              <div style=\"text-align: center; margin-top: 5px\">{{item.nickName}}</div>\r\n            </div>\r\n            <div\r\n              style=\"height: 200px; padding: 20px 0 0 20px; overflow: hidden\" v-html=\"item.commentContent\"\r\n            >\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request.js\";\r\nimport { Editor, Toolbar } from \"@wangeditor/editor-for-vue\";\r\nexport default {\r\n  components: { Editor, Toolbar },\r\n  data() {\r\n    return {\r\n      editor: null,\r\n      commentContent: \"\",\r\n      toolbarConfig: {},\r\n      editorConfig: { placeholder: \"请输入内容...\" },\r\n      mode: \"default\", // or 'simple',\r\n      url: \"@/assets/head\",\r\n      session: \"\",\r\n      nickName: \"\",\r\n      uid: \"\",\r\n      commentList:[]\r\n    };\r\n  },\r\n  created() {\r\n    this.load();\r\n    this.session = JSON.parse(window.sessionStorage.getItem(\"user\"));\r\n    this.nickName = this.session.nickName;\r\n    // console.log(this.session.username);\r\n    this.uid = this.session.username;\r\n \r\n    // this.nickName = this.session.data\r\n  },\r\n  methods: {\r\n    load(){\r\n        request.get(\"/comment/selectAllComment\").then((res)=>{\r\n            this.commentList = res.data;\r\n            // console.log(res.data);\r\n        })\r\n    },\r\n    onCreated(editor) {\r\n      this.editor = Object.seal(editor); // 一定要用 Object.seal() ，否则会报错\r\n    },\r\n    insertComment() {\r\n      request\r\n        .get(\"/comment/insertComment\", {\r\n          params: {\r\n            commentContent: this.commentContent,\r\n            nickName: this.nickName,\r\n            uid: this.uid,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.code === \"0\") {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"发表评论成功\",\r\n            });\r\n          } else {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: res.msg,\r\n            });\r\n          }\r\n          this.commentContent = \"\";\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    // 模拟 ajax 请求，异步渲染编辑器\r\n    setTimeout(() => {\r\n      this.html = \"<p>模拟 Ajax 异步设置内容 HTML</p>\";\r\n    }, 1500);\r\n  },\r\n  beforeDestroy() {\r\n    const editor = this.editor;\r\n    if (editor == null) return;\r\n    editor.destroy(); // 组件销毁时，及时销毁编辑器\r\n  },\r\n};\r\n</script>\r\n\r\n<style src=\"@wangeditor/editor/dist/css/style.css\">\r\n</style>\r\n"]}]}