{"ast":null,"code":"import request from \"@/utils/request.js\";\nimport { Editor, Toolbar } from \"@wangeditor/editor-for-vue\";\nexport default {\n  components: {\n    Editor,\n    Toolbar\n  },\n  data() {\n    return {\n      editor: null,\n      commentContent: \"<p>hello</p>\",\n      toolbarConfig: {},\n      editorConfig: {\n        placeholder: \"请输入内容...\"\n      },\n      mode: \"default\",\n      // or 'simple',\n      url: '@/assets/head',\n      session: '',\n      nickName: '',\n      uid: ''\n    };\n  },\n  created() {\n    this.session = JSON.parse(window.sessionStorage.getItem(\"user\"));\n    this.nickName = this.session.nickName;\n    // console.log(this.session.username);\n    this.uid = this.session.username;\n    // this.nickName = this.session.data\n  },\n\n  methods: {\n    onCreated(editor) {\n      this.editor = Object.seal(editor); // 一定要用 Object.seal() ，否则会报错\n    },\n\n    insertComment() {\n      request.get(\"/comment/insertComment\", {\n        params: {\n          commentContent: this.commentContent,\n          nickName: this.nickName,\n          uid: this.uid\n        }\n      }).then(res => {\n        this.$nextTick(() => {\n          this.$refs[\"upload\"].clearFiles(); //清除历史文件列表\n        });\n\n        console.log(res);\n      });\n    }\n  },\n  mounted() {\n    // 模拟 ajax 请求，异步渲染编辑器\n    setTimeout(() => {\n      this.html = \"<p>模拟 Ajax 异步设置内容 HTML</p>\";\n    }, 1500);\n  },\n  beforeDestroy() {\n    const editor = this.editor;\n    if (editor == null) return;\n    editor.destroy(); // 组件销毁时，及时销毁编辑器\n  }\n};","map":{"version":3,"mappings":"AAsEA;AACA;AACA;EACAA;IAAAC;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;QAAAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACA;EAEA;;EACAC;IACAC;MACA;IACA;;IACAC;MACAC;QACAC;UACAd;UACAO;UACAC;QACA;MACA;QACA;UACA;QACA;;QACAO;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;IACA;IACAnB;EACA;AACA","names":["components","Editor","Toolbar","data","editor","commentContent","toolbarConfig","editorConfig","placeholder","mode","url","session","nickName","uid","created","methods","onCreated","insertComment","request","params","console","mounted","setTimeout","beforeDestroy"],"sourceRoot":"src/views","sources":["Comment.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <h2\r\n        style=\"\r\n          margin: 15px 20px;\r\n          color: #409eff;\r\n          border-bottom: 5px solid gray;\r\n          padding-bottom: 8px;\r\n        \"\r\n      >\r\n        讨论区\r\n      </h2>\r\n      <div>\r\n        <div style=\"border: 1px solid #ccc; width: 1000px; margin-left: 20%\">\r\n          <Toolbar\r\n            style=\"border-bottom: 1px solid #ccc\"\r\n            :editor=\"editor\"\r\n            :defaultConfig=\"toolbarConfig\"\r\n            :mode=\"mode\"\r\n          />\r\n          <Editor\r\n            style=\"height: 300px; overflow-y: hidden\"\r\n            v-model=\"commentContent\"\r\n            :defaultConfig=\"editorConfig\"\r\n            :mode=\"mode\"\r\n            @onCreated=\"onCreated\"\r\n          />\r\n        </div>\r\n        <div><el-button type=\"primary\" style=\"margin:5px 0 0 70%\" @click=\"insertComment\">发送评论</el-button></div>\r\n        <div\r\n          style=\"\r\n            border-top: 2px solid #409eff;\r\n            margin-top: 10px;\r\n            padding-top: 30px;\r\n          \"\r\n        >\r\n          <div style=\"width: 1000px; margin-left: 20%; border: 1px solid #ccc\">\r\n            <div\r\n              style=\"\r\n                float: left;\r\n                width: 20%;\r\n                height: 200px;\r\n                border-right: 1px solid #ccc;\r\n              \"\r\n            >\r\n              <div\r\n                style=\"\r\n                  width: 150px;\r\n                  height: 150px;\r\n                  margin-left: 13%;\r\n                  margin-top: 10px;\r\n                  margin-right:10px;\r\n                \"\r\n              >\r\n                <img src=\"@/assets/head.jpg\"\r\n                  style=\"width: 150; height: 150px;border-radius:10px\"\r\n                >\r\n              </div>\r\n              <div style=\"text-align: center; margin-top: 5px\">id</div>\r\n            </div>\r\n            <div style=\"height:200px;padding:20px 0 0 20px;overflow:hidden\">评论</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request.js\";\r\nimport { Editor, Toolbar } from \"@wangeditor/editor-for-vue\";\r\nexport default {\r\n  components: { Editor, Toolbar },\r\n  data() {\r\n    return {\r\n      editor: null,\r\n      commentContent: \"<p>hello</p>\",\r\n      toolbarConfig: {},\r\n      editorConfig: { placeholder: \"请输入内容...\" },\r\n      mode: \"default\", // or 'simple',\r\n      url: '@/assets/head',\r\n      session:'',\r\n      nickName:'',\r\n      uid:'',\r\n    };\r\n  },\r\n  created(){\r\n    this.session = JSON.parse(window.sessionStorage.getItem(\"user\"));\r\n    this.nickName = this.session.nickName;\r\n    // console.log(this.session.username);\r\n    this.uid = this.session.username;\r\n    // this.nickName = this.session.data\r\n  \r\n  },\r\n  methods: {\r\n    onCreated(editor) {\r\n      this.editor = Object.seal(editor); // 一定要用 Object.seal() ，否则会报错\r\n    },\r\n    insertComment(){\r\n        request.get(\"/comment/insertComment\",{\r\n            params:{\r\n                commentContent:this.commentContent,\r\n                nickName:this.nickName,\r\n                uid:this.uid\r\n            }\r\n        }).then((res)=>{\r\n            this.$nextTick(() => {\r\n        this.$refs[\"upload\"].clearFiles(); //清除历史文件列表\r\n      });\r\n            console.log(res);\r\n        })\r\n    }\r\n  },\r\n  mounted() {\r\n    // 模拟 ajax 请求，异步渲染编辑器\r\n    setTimeout(() => {\r\n      this.html = \"<p>模拟 Ajax 异步设置内容 HTML</p>\";\r\n    }, 1500);\r\n  },\r\n  beforeDestroy() {\r\n    const editor = this.editor;\r\n    if (editor == null) return;\r\n    editor.destroy(); // 组件销毁时，及时销毁编辑器\r\n  },\r\n};\r\n</script>\r\n\r\n<style src=\"@wangeditor/editor/dist/css/style.css\">\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}