{"ast":null,"code":"import request from \"@/utils/request.js\";\nimport { Editor, Toolbar } from \"@wangeditor/editor-for-vue\";\nexport default {\n  components: {\n    Editor,\n    Toolbar\n  },\n  data() {\n    return {\n      editor: null,\n      commentContent: \"\",\n      toolbarConfig: {},\n      editorConfig: {\n        placeholder: \"请输入内容...\"\n      },\n      mode: \"default\",\n      // or 'simple',\n      url: \"@/assets/head\",\n      session: \"\",\n      nickName: \"\",\n      uid: \"\",\n      commentList: []\n    };\n  },\n  created() {\n    this.session = JSON.parse(window.sessionStorage.getItem(\"user\"));\n    this.nickName = this.session.nickName;\n    // console.log(this.session.username);\n    this.uid = this.session.username;\n    console.log(uid);\n    this.load();\n    // this.nickName = this.session.data\n  },\n\n  methods: {\n    load() {\n      request.get(\"/comment/selectAllComment\").then(res => {\n        this.commentList = res.data;\n        console.log(res.data);\n      });\n    },\n    onCreated(editor) {\n      this.editor = Object.seal(editor); // 一定要用 Object.seal() ，否则会报错\n    },\n\n    insertComment() {\n      request.get(\"/comment/insertComment\", {\n        params: {\n          commentContent: this.commentContent,\n          nickName: this.nickName,\n          uid: this.uid\n        }\n      }).then(res => {\n        console.log(res);\n        if (res.code === \"0\") {\n          this.$message({\n            type: \"success\",\n            message: \"发表评论成功\"\n          });\n        } else {\n          this.$message({\n            type: \"error\",\n            message: res.msg\n          });\n        }\n        this.commentContent = \"\";\n      });\n    }\n  },\n  mounted() {\n    // 模拟 ajax 请求，异步渲染编辑器\n    setTimeout(() => {\n      this.html = \"<p>模拟 Ajax 异步设置内容 HTML</p>\";\n    }, 1500);\n  },\n  beforeDestroy() {\n    const editor = this.editor;\n    if (editor == null) return;\n    editor.destroy(); // 组件销毁时，及时销毁编辑器\n  }\n};","map":{"version":3,"mappings":"AAmFA;AACA;AACA;EACAA;IAAAC;IAAAC;EAAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;QAAAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACAC;IACA;IACA;EACA;;EACAC;IACAC;MACAC;QACA;QACAH;MACA;IACA;IACAI;MACA;IACA;;IACAC;MACAF,QACAG;QACAC;UACAlB;UACAO;UACAC;QACA;MACA,GACAW;QACAR;QACA;UACA;YACAS;YACAC;UACA;QACA;UACA;YACAD;YACAC;UACA;QACA;QACA;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;IACA;EACA;EACAC;IACA;IACA;IACAzB;EACA;AACA","names":["components","Editor","Toolbar","data","editor","commentContent","toolbarConfig","editorConfig","placeholder","mode","url","session","nickName","uid","commentList","created","console","methods","load","request","onCreated","insertComment","get","params","then","type","message","mounted","setTimeout","beforeDestroy"],"sourceRoot":"src/views","sources":["Comment.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <h2\r\n        style=\"\r\n          margin: 15px 20px;\r\n          color: #409eff;\r\n          border-bottom: 5px solid gray;\r\n          padding-bottom: 8px;\r\n        \"\r\n      >\r\n        讨论区\r\n      </h2>\r\n      <div>\r\n        <div style=\"border: 1px solid #ccc; width: 1000px; margin-left: 20%\">\r\n          <Toolbar\r\n            style=\"border-bottom: 1px solid #ccc\"\r\n            :editor=\"editor\"\r\n            :defaultConfig=\"toolbarConfig\"\r\n            :mode=\"mode\"\r\n          />\r\n          <Editor\r\n            style=\"height: 300px; overflow-y: hidden\"\r\n            v-model=\"commentContent\"\r\n            :defaultConfig=\"editorConfig\"\r\n            :mode=\"mode\"\r\n            @onCreated=\"onCreated\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <el-button\r\n            type=\"primary\"\r\n            style=\"margin: 5px 0 0 70%\"\r\n            @click=\"insertComment\"\r\n            >发送评论</el-button\r\n          >\r\n        </div>\r\n        <div\r\n          style=\"\r\n            border-top: 2px solid #409eff;\r\n            margin-top: 10px;\r\n            padding-top: 30px;\r\n          \"\r\n        >\r\n          <div style=\"width: 1000px; margin-left: 20%; border: 1px solid #ccc\">\r\n            <div\r\n              style=\"\r\n                float: left;\r\n                width: 20%;\r\n                height: 200px;\r\n                border-right: 1px solid #ccc;\r\n              \"\r\n            >\r\n              <div\r\n                style=\"\r\n                  width: 150px;\r\n                  height: 150px;\r\n                  margin-left: 13%;\r\n                  margin-top: 10px;\r\n                  margin-right: 10px;\r\n                \"\r\n\r\n              >\r\n                <img\r\n                  src=\"@/assets/head.jpg\"\r\n                  style=\"width: 150; height: 150px; border-radius: 10px\"\r\n                />\r\n              </div>\r\n              <div style=\"text-align: center; margin-top: 5px\">{{item.uid}}</div>\r\n            </div>\r\n            <div\r\n              style=\"height: 200px; padding: 20px 0 0 20px; overflow: hidden\"\r\n            >\r\n              {{item.commentContent}}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request.js\";\r\nimport { Editor, Toolbar } from \"@wangeditor/editor-for-vue\";\r\nexport default {\r\n  components: { Editor, Toolbar },\r\n  data() {\r\n    return {\r\n      editor: null,\r\n      commentContent: \"\",\r\n      toolbarConfig: {},\r\n      editorConfig: { placeholder: \"请输入内容...\" },\r\n      mode: \"default\", // or 'simple',\r\n      url: \"@/assets/head\",\r\n      session: \"\",\r\n      nickName: \"\",\r\n      uid: \"\",\r\n      commentList:[]\r\n    };\r\n  },\r\n  created() {\r\n    this.session = JSON.parse(window.sessionStorage.getItem(\"user\"));\r\n    this.nickName = this.session.nickName;\r\n    // console.log(this.session.username);\r\n    this.uid = this.session.username;\r\n    console.log(uid);\r\n    this.load();\r\n    // this.nickName = this.session.data\r\n  },\r\n  methods: {\r\n    load(){\r\n        request.get(\"/comment/selectAllComment\").then((res)=>{\r\n            this.commentList = res.data;\r\n            console.log(res.data);\r\n        })\r\n    },\r\n    onCreated(editor) {\r\n      this.editor = Object.seal(editor); // 一定要用 Object.seal() ，否则会报错\r\n    },\r\n    insertComment() {\r\n      request\r\n        .get(\"/comment/insertComment\", {\r\n          params: {\r\n            commentContent: this.commentContent,\r\n            nickName: this.nickName,\r\n            uid: this.uid,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          console.log(res);\r\n          if (res.code === \"0\") {\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"发表评论成功\",\r\n            });\r\n          } else {\r\n            this.$message({\r\n              type: \"error\",\r\n              message: res.msg,\r\n            });\r\n          }\r\n          this.commentContent = \"\";\r\n        });\r\n    },\r\n  },\r\n  mounted() {\r\n    // 模拟 ajax 请求，异步渲染编辑器\r\n    setTimeout(() => {\r\n      this.html = \"<p>模拟 Ajax 异步设置内容 HTML</p>\";\r\n    }, 1500);\r\n  },\r\n  beforeDestroy() {\r\n    const editor = this.editor;\r\n    if (editor == null) return;\r\n    editor.destroy(); // 组件销毁时，及时销毁编辑器\r\n  },\r\n};\r\n</script>\r\n\r\n<style src=\"@wangeditor/editor/dist/css/style.css\">\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}